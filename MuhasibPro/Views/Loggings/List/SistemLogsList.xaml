<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="MuhasibPro.Views.Loggings.List.SistemLogsList"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:MuhasibPro.Controls"
    xmlns:models="using:Muhasib.Business.Models.SistemModel"
    xmlns:tv="using:WinUI.TableView"
    Loaded="Page_Onloaded">

    <controls:DataList x:Name="dataList">
        <controls:DataList.ConfigControl>
            <controls:BaseConfig>
                <controls:BaseConfig.CoreData>
                    <controls:CoreDataConfig
                        ItemsCount="{x:Bind ViewModel.ItemsCount, Mode=OneWay}"
                        ItemsSource="{x:Bind ViewModel.Items, Mode=OneWay}"
                        Query="{x:Bind ViewModel.Query, Mode=TwoWay}"
                        SelectedItem="{x:Bind ViewModel.SelectedItem, Mode=TwoWay}">
                        <controls:CoreDataConfig.ListContent>
                            <tv:TableView
                                HeaderGridLinesVisibility="Vertical"                                
                                GridLinesVisibility="Horizontal"
                                x:Name="pageTableView"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Stretch"
                                VerticalContentAlignment="Stretch"
                                AutoGenerateColumns="False"
                                IsMultiSelectCheckBoxEnabled="{x:Bind ViewModel.IsMultipleSelection, Mode=TwoWay}"
                                IsReadOnly="True"
                                ItemsSource="{x:Bind ViewModel.ItemsSource, Mode=OneWay}"
                                SelectedItem="{x:Bind ViewModel.SelectedItem, Mode=TwoWay}"
                                SelectionMode="{x:Bind dataList.ConfigControl.Selection.SelectionMode, Mode=OneWay}"
                                SelectionUnit="Row">
                                
                                <tv:TableView.Columns>
                                    <!-- Icon Column -->
                                    <tv:TableViewTemplateColumn Width="32">
                                        <tv:TableViewTemplateColumn.CellTemplate>
                                            <DataTemplate x:DataType="models:SistemLogModel">
                                                <FontIcon Foreground="{x:Bind Type, Converter={StaticResource LogTypeConverter}}" Glyph="{x:Bind Type, Converter={StaticResource LogTypeConverter}}" />
                                            </DataTemplate>
                                        </tv:TableViewTemplateColumn.CellTemplate>
                                    </tv:TableViewTemplateColumn>

                                    <!-- Log Type -->
                                    <tv:TableViewTextColumn
                                        Width="auto"
                                        Binding="{Binding Type}"
                                        Header="Log Türü" />
                                    <tv:TableViewTextColumn
                                        Width="120"
                                        Binding="{Binding Id}"
                                        Header="Log Id" />
                                    <tv:TableViewTextColumn
                                        Width="100"
                                        Binding="{Binding KayitTarihi,Converter={StaticResource DateTimeFormatConverter}}"
                                        Header="Tarih" />
                                    <tv:TableViewTextColumn
                                        Width="80"
                                        Binding="{Binding KayitTarihi,Converter={StaticResource DateTimeFormatConverter},ConverterParameter=longtime}"
                                        Header="Saat" />
                                    <tv:TableViewTextColumn
                                        Width="1*"
                                        Binding="{Binding User}"
                                        Header="Kullanıcı" />
                                    <tv:TableViewTextColumn
                                        Width="1*"
                                        Binding="{Binding Source}"
                                        Header="Kaynak" />
                                    <tv:TableViewTextColumn
                                        Width="1*"
                                        Binding="{Binding Action}"
                                        Header="Eylem" />
                                    <tv:TableViewTextColumn
                                        Width="2*"
                                        Binding="{Binding Message}"
                                        Header="Mesaj" />
                                    <!-- Diğer tüm kolonlarınızı buraya ekleyin... -->

                                </tv:TableView.Columns>

                            </tv:TableView>
                        </controls:CoreDataConfig.ListContent>
                    </controls:CoreDataConfig>
                </controls:BaseConfig.CoreData>

                <controls:BaseConfig.Selection>
                    <controls:SelectionConfig IsMultipleSelection="{x:Bind ViewModel.IsMultipleSelection, Mode=TwoWay}" />
                </controls:BaseConfig.Selection>

                <controls:BaseConfig.Pagination>
                    <controls:PaginationConfig
                        CurrentPage="{x:Bind ViewModel.CurrentPage, Mode=TwoWay}"
                        NextPageCommand="{x:Bind ViewModel.NextPageCommand}"
                        PageSize="{x:Bind ViewModel.PageSize, Mode=TwoWay}"
                        PreviousPageCommand="{x:Bind ViewModel.PreviousPageCommand}"
                        TotalItems="{x:Bind ViewModel.ItemsCount, Mode=OneWay}" />
                </controls:BaseConfig.Pagination>

                <controls:BaseConfig.Command>
                    <controls:CommandConfig
                        CancelSelectionCommand="{x:Bind ViewModel.CancelSelectionCommand}"
                        DefaultCommands="select,refresh,search"
                        DeleteCommand="{x:Bind ViewModel.DeleteSelectionCommand}"
                        DeselectItemsCommand="{x:Bind ViewModel.DeselectItemsCommand}"
                        QuerySubmittedCommand="{x:Bind ViewModel.RefreshCommand}"
                        RefreshCommand="{x:Bind ViewModel.RefreshCommand}"
                        SelectItemsCommand="{x:Bind ViewModel.SelectItemsCommand}"
                        SelectRangesCommand="{x:Bind ViewModel.SelectRangesCommand}"
                        StartSelectionCommand="{x:Bind ViewModel.StartSelectionCommand}" />
                </controls:BaseConfig.Command>
            </controls:BaseConfig>
        </controls:DataList.ConfigControl>
    </controls:DataList>
</UserControl>